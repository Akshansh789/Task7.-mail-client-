{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chaha\\\\Downloads\\\\task-5-Compose and send Mail\\\\src\\\\Components\\\\Pages\\\\ComposeMail.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport './Inbox';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { Button } from 'react-bootstrap';\nimport { useSelector } from 'react-redux';\nimport { EditorState, convertToRaw } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction removeSpecialChar(mail) {\n  let newMail = \"\";\n  for (let i = 0; i < mail.length; i++) {\n    if (mail[i] !== \"@\" && mail[i] !== \".\") {\n      newMail += mail[i];\n    }\n  }\n  return newMail;\n}\nfunction ComposeMail() {\n  _s();\n  const receiver = useRef();\n  const subject = useRef();\n  const mailBody = useRef();\n  const sender = useSelector(state => state.authentication.user);\n  const [editorState, setEditorState] = useState(() => EditorState.createEmpty());\n\n  // const updateTextDescription = async (state) => {\n  //     await setEditorState(state);\n  //     const data = convertToRaw(editorState.getCurrentContent());\n\n  // };\n  const handleSendMail = async e => {\n    e.preventDefault();\n    console.log(\"sended\");\n    console.log(receiver.current.value, subject.current.value, mailBody.current.value, sender);\n    const newMail = {\n      mailSubject: subject.current.value,\n      mailContent: mailBody.current.value,\n      Sender: sender\n    };\n    if (receiver.current.value.length > 0 && mailBody.current.value.length > 0 && subject.current.value.length > 0) {\n      try {\n        let responce = await fetch(`https://react-mailbox-client-8409e-default-rtdb.firebaseio.com/mail/${removeSpecialChar(receiver.current.value)}.json`, {\n          method: 'POST',\n          body: JSON.stringify(newMail),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        if (responce.ok) {\n          let data = await responce.json();\n          console.log(data);\n          alert(\"mail sent successfully\");\n        } else {\n          throw new Error(\"Failed to send mail\");\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    } else {\n      alert(\"please fill all the data\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center\",\n        children: \"Draft your mail\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          className: \"form-control\",\n          id: \"exampleInputEmail1\",\n          placeholder: \"To\",\n          ref: receiver,\n          \"aria-describedby\": \"emailHelp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          className: \"form-control\",\n          id: \"exampleInputSubject\",\n          ref: subject,\n          \"aria-describedby\": \"emailHelp\",\n          placeholder: \"Subject\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"w-100\",\n        style: {\n          height: \"20rem\"\n        },\n        ref: mailBody,\n        placeholder: \"Draft your mail here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container  text-center\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        className: \"my-2 w-25\",\n        onClick: handleSendMail,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(ComposeMail, \"g6Sf1JqFti8/I+JByYDQgqW8HQ0=\", false, function () {\n  return [useSelector];\n});\n_c = ComposeMail;\nexport default ComposeMail;\nvar _c;\n$RefreshReg$(_c, \"ComposeMail\");","map":{"version":3,"names":["React","useRef","useState","Button","useSelector","EditorState","convertToRaw","Editor","draftToHtml","htmlToDraft","jsxDEV","_jsxDEV","Fragment","_Fragment","removeSpecialChar","mail","newMail","i","length","ComposeMail","_s","receiver","subject","mailBody","sender","state","authentication","user","editorState","setEditorState","createEmpty","handleSendMail","e","preventDefault","console","log","current","value","mailSubject","mailContent","Sender","responce","fetch","method","body","JSON","stringify","headers","ok","data","json","alert","Error","error","children","className","fileName","_jsxFileName","lineNumber","columnNumber","type","id","placeholder","ref","style","height","variant","onClick","_c","$RefreshReg$"],"sources":["C:/Users/chaha/Downloads/task-5-Compose and send Mail/src/Components/Pages/ComposeMail.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport './Inbox'\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { Button } from 'react-bootstrap';\nimport { useSelector } from 'react-redux';\nimport { EditorState, convertToRaw } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs';\n\nfunction removeSpecialChar(mail) {\n    let newMail = \"\";\n    for (let i = 0; i < mail.length; i++) {\n        if (mail[i] !== \"@\" && mail[i] !== \".\") {\n            newMail += mail[i]\n        }\n    }\n    return newMail;\n}\n\nfunction ComposeMail() {\n    const receiver = useRef();\n    const subject = useRef();\n    const mailBody = useRef();\n    const sender = useSelector(state => state.authentication.user);\n\n    const [editorState, setEditorState] = useState(() =>\n        EditorState.createEmpty()\n    );\n\n    // const updateTextDescription = async (state) => {\n    //     await setEditorState(state);\n    //     const data = convertToRaw(editorState.getCurrentContent());\n\n    // };\n    const handleSendMail = async (e) => {\n        e.preventDefault();\n        console.log(\"sended\");\n        console.log(receiver.current.value, subject.current.value, mailBody.current.value, sender);\n\n\n        const newMail = {\n            mailSubject: subject.current.value,\n            mailContent: mailBody.current.value,\n            Sender: sender\n        }\n\n\n\n        if (receiver.current.value.length > 0 && mailBody.current.value.length > 0 && subject.current.value.length > 0) {\n\n            try {\n                let responce = await fetch(\n                    `https://react-mailbox-client-8409e-default-rtdb.firebaseio.com/mail/${removeSpecialChar(receiver.current.value)}.json`,\n                    {\n                        method: 'POST',\n                        body: JSON.stringify(newMail),\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                    }\n                )\n                if (responce.ok) {\n                    let data = await responce.json();\n                    console.log(data);\n                    alert(\"mail sent successfully\");\n                } else {\n                    throw new Error(\"Failed to send mail\")\n                }\n            } catch (error) {\n                console.log(error)\n            }\n        } else {\n            alert(\"please fill all the data\")\n        }\n    }\n\n    return (\n        <>\n            <div className=\"App container\">\n                <h1 className=\"text-center\">\n                    Draft your mail\n                </h1>\n                <div>\n                    <input type=\"email\" className=\"form-control\" id=\"exampleInputEmail1\" placeholder='To' ref={receiver} aria-describedby=\"emailHelp\" />\n                    <hr />\n                </div>\n                <div>\n                    <input type=\"email\" className=\"form-control\" id=\"exampleInputSubject\" ref={subject} aria-describedby=\"emailHelp\" placeholder='Subject' />\n                    <hr />\n                </div>\n                <textarea className='w-100' style={{ height: \"20rem\" }} ref={mailBody} placeholder='Draft your mail here' />\n\n            </div>\n            <div className='container  text-center'>\n                <Button variant=\"primary\" className='my-2 w-25' onClick={handleSendMail}>\n                    Send\n                </Button>\n            </div>\n        </>\n    )\n}\n\nexport default ComposeMail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}