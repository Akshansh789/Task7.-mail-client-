{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chaha\\\\Downloads\\\\Task-7 Inbox view page\\\\src\\\\Components\\\\Pages\\\\Inbox.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport './Inbox';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { Accordion, Button } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { messageActions } from '../Store';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction removeSpecialChar(mail) {\n  let newMail = \"\";\n  for (let i = 0; i < mail.length; i++) {\n    if (mail[i] !== \"@\" && mail[i] !== \".\") {\n      newMail += mail[i];\n    }\n  }\n  return newMail;\n}\nfunction Inbox() {\n  _s();\n  const user = removeSpecialChar(useSelector(state => state.authentication.user));\n  const messages = useSelector(state => state.messages.messages);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const handleCompose = e => {\n    e.preventDefault();\n    history.push(\"/composemail\");\n  };\n  useEffect(() => {\n    async function fetchMessages() {\n      try {\n        let responce = await fetch(`https://react-mailbox-client-8409e-default-rtdb.firebaseio.com/mail/${user}.json`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        if (responce.ok) {\n          let data = await responce.json();\n          console.log(data);\n          const keys = Object.keys(data);\n          let newMessageArray = [];\n          keys.forEach(key => {\n            newMessageArray.unshift(data[key]);\n          });\n          console.log(newMessageArray);\n          dispatch(messageActions.setMessages(newMessageArray));\n        } else {\n          throw new Error(\"Failed to fetch mail\");\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    fetchMessages();\n  }, [user, messages]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"my-2  mx-2 row\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"fst-italic col-md-8\",\n        children: \"Welcome to your mail box!!!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: handleCompose,\n        children: \"Compose\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center\",\n      children: \"Inbox\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), messages.map(message => {\n      return /*#__PURE__*/_jsxDEV(Accordion, {\n        defaultActiveKey: \"0\",\n        children: /*#__PURE__*/_jsxDEV(Accordion.Item, {\n          eventKey: \"1\",\n          children: [/*#__PURE__*/_jsxDEV(Accordion.Header, {\n            children: [\"From:\", message.Sender]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Accordion.Body, {\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: [\"Subject:\", message.mailSubject]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: message.mailContent\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 16\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_s(Inbox, \"za2cBKYywn0YwuwikNCHeCwadW8=\", false, function () {\n  return [useSelector, useSelector, useDispatch, useHistory];\n});\n_c = Inbox;\nexport default Inbox;\nvar _c;\n$RefreshReg$(_c, \"Inbox\");","map":{"version":3,"names":["React","useEffect","Accordion","Button","useDispatch","useSelector","messageActions","useHistory","jsxDEV","_jsxDEV","removeSpecialChar","mail","newMail","i","length","Inbox","_s","user","state","authentication","messages","dispatch","history","handleCompose","e","preventDefault","push","fetchMessages","responce","fetch","method","headers","ok","data","json","console","log","keys","Object","newMessageArray","forEach","key","unshift","setMessages","Error","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","variant","onClick","map","message","defaultActiveKey","Item","eventKey","Header","Sender","Body","mailSubject","mailContent","_c","$RefreshReg$"],"sources":["C:/Users/chaha/Downloads/Task-7 Inbox view page/src/Components/Pages/Inbox.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport './Inbox'\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { Accordion, Button } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { messageActions } from '../Store';\nimport { useHistory } from 'react-router-dom';\n\nfunction removeSpecialChar(mail) {\n  let newMail = \"\";\n  for (let i = 0; i < mail.length; i++) {\n    if (mail[i] !== \"@\" && mail[i] !== \".\") {\n      newMail += mail[i]\n    }\n  }\n  return newMail;\n}\n\nfunction Inbox() {\n  const user = removeSpecialChar(useSelector(state => state.authentication.user));\n  const messages = useSelector(state => state.messages.messages);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const handleCompose = (e) => {\n    e.preventDefault();\n    history.push(\"/composemail\");\n  }\n  useEffect(() => {\n    async function fetchMessages() {\n      try {\n        let responce = await fetch(\n          `https://react-mailbox-client-8409e-default-rtdb.firebaseio.com/mail/${user}.json`,\n          {\n            method: 'GET',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n          }\n        )\n        if (responce.ok) {\n          let data = await responce.json();\n          console.log(data);\n          const keys = Object.keys(data);\n          let newMessageArray = [];\n          keys.forEach((key) => {\n            newMessageArray.unshift(data[key])\n          });\n          console.log(newMessageArray);\n          dispatch(messageActions.setMessages(newMessageArray));\n        } else {\n          throw new Error(\"Failed to fetch mail\")\n        }\n      } catch (error) {\n        console.log(error)\n      }\n    }\n    fetchMessages();\n  }, [user, messages])\n\n  return (\n    <div className='container'>\n\n      <div className='my-2  mx-2 row'>\n        <h1 className=\"fst-italic col-md-8\" >\n          Welcome to your mail box!!!\n        </h1>\n        <hr />\n      </div>\n      <div>\n        <Button variant=\"primary\" onClick={handleCompose}>\n          Compose\n        </Button>\n      </div>\n      <h1 className='text-center'>Inbox</h1>\n      {messages.map((message) => {\n        return <Accordion defaultActiveKey=\"0\">\n          <Accordion.Item eventKey=\"1\">\n            <Accordion.Header>From:{message.Sender}</Accordion.Header>\n            <Accordion.Body>\n              <h5>Subject:{message.mailSubject}</h5>\n              <p>{message.mailContent}</p>\n            </Accordion.Body>\n          </Accordion.Item>\n        </Accordion>\n      })\n      }\n    </div>\n  )\n}\n\nexport default Inbox;\n\n\n\n\n\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}